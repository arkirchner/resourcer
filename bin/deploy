#!/bin/bash

set -e

gcloud --quiet config set project "resourcer"
gcloud --quiet config set compute/zone "us-central1"
gcloud --quiet auth configure-docker

docker build -t gcr.io/resourcer/resourcer:latest .
docker push gcr.io/resourcer/resourcer:latest

gcloud run deploy resourcer --image gcr.io/resourcer/resourcer:latest \
                            --platform managed  \
                            --region us-central1
